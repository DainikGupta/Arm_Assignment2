;The program is used to calculate the expontential of a number x.
;It makes use of a infinite series.
;However, in this case, a fixed number of terms are used.

	AREA    exponent,CODE,READONLY
        EXPORT __main
        ENTRY
__main    FUNCTION
		MOV R0, #10			;VALUE OF X
		VMOV.F32 S2, #1		;STORING FACTORIAL VALUE
		VMOV.F32 S5, #1		;STORING EACH TERM
		VMOV.F32 S6, #1		;STORING THE SUM
		MOV R1, #30			;NUMBER OF TERMS IN SERIES TO BE CALCULATED(n)
		MOV R10, #0
		CMP R0, #20			;IF X>20 THE PROGRAM WILL STOP.
		BGT STOP		
		CMP R1, #30			;IF n>30 THE PROGRAM WILL STOP.
		BGT STOP
		B LOOP1


;THIS LOOP IS USED TO GENERATE DIFFERENT TERMS IN THE EXPONENTIAL SERIES.
LOOP1	BL POWER			;TO GENERATE DIFFERENT POWERS OF X.
		ADD R10, R10, #1	;INCREMENTING FOR LOOP
		MOV R3, R10			;LET R3 IS STORING n'
		VMOV.F32 S2, #1		;INITIALING THE FACTORIAL REGISTER
		CMP R10, R1			;COMPARISON FOR THE NO. OF TERMS(n'<n).
		BLT FACT			;BRANCHING TO FACT
		B STOP


;THIS FUNCTION IS TO CALCULATE THE FACTORIAL OF A NUMBER.
;THE NUMBER WHOSE FACTORIAL IS TO BE CALCULATED WILL BE STORED IN R3.
;THE FACTORIAL VALUE WILL BE STORED IN S2.
FACT 	VMOV S3, R3			;MOVING THE VALUE OF R3 TO FPREGISTER S3.
		VCVT.F32.U32 S3, S3	;CONVERTING THE FLOATING POINT VALUE TO INTEGER.
		VMUL.F32 S2, S2, S3	;CALCULATING FACTORIAL BY MULTIPLYING S3.
		SUB R3, R3, #1		;DECREMENTING n'
		CMP R3, #1			;S7 IS USED TO STORE VALUE OF 1
		BGT FACT
		BLE SUM


;THIS FUNCTION CALCULATES THE SUM OF THE SERIES.
SUM		VDIV.F32 S7, S5, S2	;THIS CALCULATES EACH TERM BY DIVING THE POWER OF X BY FACTORIAL VALUE.
		VADD.F32 S6, S6, S7	;THE NEW TERM IS ADDED TO SUM.
		B LOOP1


;THIS IS USED TO CALCULATE DIFFERENT POWERS OF X
POWER	VMOV S0, R0			;MOVING THE VALUE OF R0 TO FP REGISTER S0.
		VCVT.F32.U32 S0, S0	;CONVERTING THE FLOATING POINT VALUE TO INTEGER.
		VMUL.F32 S5, S5, S0	;INCREASING POWER EACH TIME.
		BLX LR
	
	
STOP    B STOP
        ENDFUNC
        END
